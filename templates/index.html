<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="UTF-8" />
  <title>‡∞â‡∞§‡±ç‡∞∏‡∞µ ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞‡±ç - UtsavaMitra</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    input, button { padding: 10px; font-size: 16px; margin: 10px; }
    #response { margin-top: 20px; }
    audio { margin: 10px; }
  </style>
</head>
<body>
  <h1>üéâ ‡∞â‡∞§‡±ç‡∞∏‡∞µ ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞‡±ç</h1>
  <p><i>‡∞≠‡∞æ‡∞∞‡∞§‡±Ä‡∞Ø ‡∞™‡∞Ç‡∞°‡±Å‡∞ó‡∞≤ ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø!</i></p>

  <input type="text" id="query" placeholder="‡∞â‡∞¶‡∞æ: ‡∞â‡∞ó‡∞æ‡∞¶‡∞ø ‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞Ç‡∞°‡∞ø" />
  <button onclick="ask()">‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø</button>

  <div id="response"></div>

  <script>
    async function ask() {
      const input = document.getElementById("query");
      const query = input.value.trim();
      if (!query) return;

      const res = await fetch('/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: query })
      }).then(r => r.json());

      document.getElementById("response").innerHTML = `
        <p><strong>‡∞â‡∞§‡±ç‡∞∏‡∞µ ‡∞Æ‡∞ø‡∞§‡±ç‡∞∞‡±ç:</strong> ${res.text}</p>
        <audio controls autoplay>
          <source src="${res.audio}" type="audio/mpeg">
          ‡∞Æ‡±Ä ‡∞¨‡±ç‡∞∞‡±å‡∞ú‡∞∞‡±ç ‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã‡∞®‡±Å ‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å ‡∞á‡∞µ‡±ç‡∞µ‡∞°‡∞Ç ‡∞≤‡±á‡∞¶‡±Å.
        </audio>
      `;

      input.value = ""; // Clear input
    }

    // Allow pressing Enter
    document.getElementById("query").addEventListener("keypress", (e) => {
      if (e.key === "Enter") ask();
    });
  </script>
</body>
</html>
